<div class="row" id="kContainer">
  <div class="col-sm-12" id="kamilleotron">
    <h4>How can I help you?</h4>
  </div>
</div>
<script type="text/javascript">
  var kamille = document.getElementById("kamilleotron");
  var kContainer = document.getElementById("kContainer");
  function linkify(cmd) {
    var fieldset = document.createElement('fieldset');
    var hiddenInput = document.createElement('input');
    var submitButton = document.createElement('button');

    hiddenInput.value = cmd;
    submitButton.setAttribute('type', 'submit');
    submitButton.classList += "cmd";
    submitButton.innerText = cmd;
    submitButton.addEventListener("click", function(e) {
      e.preventDefault();
      console.log(cmd);
    })
    fieldset.append(hiddenInput);
    fieldset.append(submitButton);
    return fieldset;
  }

  function getResume() {
    new Promise(resolve, reject => {

    })
    .then((value) => {
      return value;
    })
  }



//---------------------------  printCharOneByOne()  ----------------------------
  var del = Math.floor(Math.random() * 10) + 20;
  var printCharOneByOne = function(statement, i, t) {
    var br = document.createElement('br');
    var interval = setInterval(function(){
      kamille.innerHTML += statement.charAt(i);
      i++;
      t += del;
      if (i > statement.length){
        clearInterval(interval);
        kamille.append(br);
      }
    }, del);
  }

//------------------------------  initial prompt  ------------------------------
  t = 0;
  charTime = del;
  lineTime = 1000;
  setTimeout(() => {
    kamille.append("> ");
    var i = 0;
    printCharOneByOne("or type -h for help", i , t);
  }, t += lineTime);
  console.log("time: " + t);

//--------------------------------  input line  --------------------------------
  var commandForm = document.createElement('form');
  var commandPrompt = document.createElement('input');
  commandPrompt.setAttribute("id", "commandPrompt");
  commandPrompt.setAttribute("type", "text");
  commandPrompt.setAttribute("autofocus", "true");
  commandForm.appendChild(commandPrompt);
  commandForm.setAttribute("id", "commandForm");
  commandForm.setAttribute("autocomplete", "off")
  setTimeout(function() {
    kContainer.append("> ");
    kContainer.append(commandForm);
  }, t+1000);

//-------------------------  handle command input  -----------------------------
  commandForm.addEventListener("submit", function(e){
    e.preventDefault();
    var br = document.createElement('br');
    var br2 = document.createElement('br');
    var command = commandPrompt.value;
    var resp;
    switch (command) {
      case "-h":
      case "-H":
      case "h":
      case "H":
        resp = "HELP I NEED SOMEBODY";

        break;
      case "resume":
      case "Resume":
        resp = getResume();
        break;
      case "chopin":
      case "Chopin":
        resp = "hey Matt, go fuck yourself";
        break;
      default:
        resp = "command not recognized!";
    }

//---------------------------------  response  ---------------------------------
    commandPrompt.value = "";

    kamilleotron.append("< " + command);
    kamilleotron.append(br);

    t = -900;
    charTime = del;
    lineTime = 1000;
    setTimeout(() => {
      kamilleotron.append("> ");
      var i = 0;
      printCharOneByOne(resp, i , t);
    }, t += lineTime);
  });
</script>
